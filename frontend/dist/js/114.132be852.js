"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[114],{2632:function(e,t,l){l.r(t),l.d(t,{default:function(){return me}});var a=l(3396),i=l(5661),o=l(1888),s=l(3849),n=l(9234),r=l(7325);const d={class:"pa-5"};function c(e,t,l,c,u,m){const p=(0,a.up)("ProgressBar"),h=(0,a.up)("ProgressDetail");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a.Wm)(p,{id:"state",currentState:u.status},null,8,["currentState"]),(0,a.Wm)(n.C,{class:"my-5"}),(0,a.Wm)(h,{shop:u.shop,car:u.car,location:e.location,problems:u.problems,currentState:u.status},null,8,["shop","car","location","problems","currentState"]),(0,a.Wm)(s.B,{modelValue:u.dialog,"onUpdate:modelValue":t[0]||(t[0]=e=>u.dialog=e),style:{width:"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i._,{class:"py-6"},{default:(0,a.w5)((()=>[(0,a.Wm)(o.Z,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" Loading, please wait ... "),(0,a.Wm)(r.K,{indeterminate:"",color:"deep-purple-accent-4",rounded:"",height:"6",class:"my-4"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var u=l(7139),m=l(702),p=l(6572),h=l(5310),v=l(9694),g=l(1138),f=l(7041),w=l(8434),_=l(4870),k=l(320),b=l(9888),y=l(131);const W=(0,k.a)({name:"VTimeline",props:{align:{type:String,default:"center",validator:e=>["center","start"].includes(e)},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},justify:{type:String,default:"auto",validator:e=>["auto","center"].includes(e)},side:{type:String,validator:e=>null==e||["start","end"].includes(e)},lineInset:{type:[String,Number],default:0},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:e=>["start","end","both"].includes(e)},...(0,v.f)(),...(0,g.Q)(),...(0,f.x$)()},setup(e,t){let{slots:l}=t;const{themeClasses:i}=(0,f.ER)(e),{densityClasses:o}=(0,v.t)(e);(0,w.AF)({VTimelineDivider:{lineColor:(0,_.Vh)(e,"lineColor")},VTimelineItem:{density:(0,_.Vh)(e,"density"),lineInset:(0,_.Vh)(e,"lineInset")}});const s=(0,a.Fl)((()=>{const t=e.side?e.side:"default"!==e.density?"end":null;return t&&`v-timeline--side-${t}`})),n=(0,a.Fl)((()=>{const t=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(e.truncateLine){case"both":return t;case"start":return t[0];case"end":return t[1];default:return null}}));return(0,b.L)((()=>(0,a.Wm)(e.tag,{class:["v-timeline",`v-timeline--${e.direction}`,`v-timeline--align-${e.align}`,`v-timeline--justify-${e.justify}`,n.value,{"v-timeline--inset-line":!!e.lineInset},i.value,o.value,s.value],style:{"--v-timeline-line-thickness":(0,y.kb)(e.lineThickness)}},l))),{}}});var S=l(3289),C=l(4960),I=l(2465),V=l(4231),D=l(9374),U=l(2370);const x=(0,k.a)({name:"VTimelineDivider",props:{dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:C.lE,iconColor:String,lineColor:String,...(0,V.I)(),...(0,D.Z)(),...(0,I.c)()},setup(e,t){let{slots:l}=t;const{sizeClasses:i,sizeStyles:o}=(0,D.t)(e,"v-timeline-divider__dot"),{backgroundColorStyles:s,backgroundColorClasses:n}=(0,U.Y5)((0,_.Vh)(e,"dotColor")),{roundedClasses:r}=(0,V.b)(e,"v-timeline-divider__dot"),{elevationClasses:d}=(0,I.Y)(e),{backgroundColorClasses:c,backgroundColorStyles:u}=(0,U.Y5)((0,_.Vh)(e,"lineColor"));return(0,w.AF)({VIcon:{color:(0,_.Vh)(e,"iconColor"),icon:(0,_.Vh)(e,"icon"),size:(0,_.Vh)(e,"size")}}),(0,b.L)((()=>{var t;return(0,a.Wm)("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":e.fillDot}]},[(0,a.Wm)("div",{class:["v-timeline-divider__before",c.value],style:u.value},null),!e.hideDot&&(0,a.Wm)("div",{key:"dot",class:["v-timeline-divider__dot",d.value,r.value,i.value],style:o.value},[(0,a.Wm)("div",{class:["v-timeline-divider__inner-dot",n.value,r.value],style:s.value},[(null==(t=l.default)?void 0:t.call(l))??(e.icon?(0,a.Wm)(S.t,null,null):void 0)])]),(0,a.Wm)("div",{class:["v-timeline-divider__after",c.value],style:u.value},null)])})),{}}});var z=l(4544);const T=(0,k.a)({name:"VTimelineItem",props:{density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:C.lE,iconColor:String,lineInset:[Number,String],...(0,V.I)(),...(0,I.c)(),...(0,D.Z)(),...(0,g.Q)(),...(0,z.x)()},setup(e,t){let{slots:l}=t;const{dimensionStyles:i}=(0,z.$)(e),o=(0,_.iH)(0),s=(0,_.iH)();return(0,a.YP)(s,(e=>{var t;e&&(o.value=(null==(t=e.$el.querySelector(".v-timeline-divider__dot"))?void 0:t.getBoundingClientRect().width)??0)}),{flush:"post"}),(0,b.L)((()=>{var t,n;return(0,a.Wm)("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":e.fillDot}],style:{"--v-timeline-dot-size":(0,y.kb)(o.value),"--v-timeline-line-inset":e.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${(0,y.kb)(e.lineInset)})`:(0,y.kb)(0)}},[(0,a.Wm)("div",{class:"v-timeline-item__body",style:i.value},[null==(t=l.default)?void 0:t.call(l)]),(0,a.Wm)(x,{ref:s,hideDot:e.hideDot,icon:e.icon,iconColor:e.iconColor,size:e.size,elevation:e.elevation,dotColor:e.dotColor,fillDot:e.fillDot,rounded:e.rounded},{default:l.icon}),"compact"!==e.density&&(0,a.Wm)("div",{class:"v-timeline-item__opposite"},[!e.hideOpposite&&(null==(n=l.opposite)?void 0:n.call(l))])])})),{}}}),E=(0,a._)("br",null,null,-1);function F(e,t,l,n,r,d){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(W,{direction:"horizontal","line-inset":"12"},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{size:"large",modelValue:r.items,"onUpdate:modelValue":t[0]||(t[0]=e=>r.items=e),"dot-color":"Processing"==l.currentState||"Accepted"==l.currentState||"On the way"==l.currentState||"Finish:Garage"==l.currentState||"Finish:Complete"==l.currentState?"green":"white",icon:r.items[0]},{opposite:(0,a.w5)((()=>[(0,a.Uk)("Accepted")])),_:1},8,["modelValue","dot-color","icon"]),(0,a.Wm)(T,{size:"large",modelValue:r.items,"onUpdate:modelValue":t[1]||(t[1]=e=>r.items=e),"dot-color":"Processing"==l.currentState||"On the way"==l.currentState||"Finish:Garage"==l.currentState||"Finish:Complete"==l.currentState?"green":"white",icon:r.items[1]},{default:(0,a.w5)((()=>[(0,a.Uk)(" On the way ")])),_:1},8,["modelValue","dot-color","icon"]),(0,a.Wm)(T,{size:"large",modelValue:r.items,"onUpdate:modelValue":t[2]||(t[2]=e=>r.items=e),"dot-color":"Processing"==l.currentState||"Finish:Garage"==l.currentState||"Finish:Complete"==l.currentState?"green":"white",icon:r.items[2]},{opposite:(0,a.w5)((()=>[(0,a.Uk)("On process")])),_:1},8,["modelValue","dot-color","icon"]),(0,a.Wm)(T,{size:"large",modelValue:r.items,"onUpdate:modelValue":t[3]||(t[3]=e=>r.items=e),"dot-color":"Finish:Garage"==l.currentState||"Finish:Complete"==l.currentState?"green":"white",icon:r.items[3]},{default:(0,a.w5)((()=>[(0,a.Uk)(" Complete ")])),_:1},8,["modelValue","dot-color","icon"])])),_:1}),"Finish:Garage"==l.currentState||"Finish:Complete"==l.currentState?((0,a.wg)(),(0,a.j4)(s.B,{key:0,modelValue:r.dialog,"onUpdate:modelValue":t[5]||(t[5]=e=>r.dialog=e),class:"text-left pa-4",width:"800"},{default:(0,a.w5)((()=>[(0,a.Wm)(i._,{class:"text-left pa-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(p.E,{class:"text-h5"},{default:(0,a.w5)((()=>[(0,a.Uk)("Service summary")])),_:1}),(0,a.Wm)(i._,{variant:"outlined",class:"text-left ma-2 pa-1"},{default:(0,a.w5)((()=>[(0,a._)("section",null,[(0,a.Wm)(p.E,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Shop name: "+(0,u.zw)(r.shop.name),1)])),_:1}),(0,a.Wm)(o.Z,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(r.shop.address)+" | "+(0,u.zw)(r.shop.ratings)+" rating ",1),E,(0,a.Uk)(" Complete stage: "+(0,u.zw)(r.complete),1)])),_:1})])])),_:1}),(0,a.Wm)(h.o,{justify:"end",class:"pa-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(m.T,{class:"mx-1",variant:"tonal",color:"blue",onClick:t[4]||(t[4]=e=>r.dialog=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("Ok")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):(0,a.kq)("",!0)])}var A={props:{currentState:{type:String}},data(){return{dialog:!0,rating:0,complete:"All fixed!",items:["mdi-thumb-up","mdi-car","mdi-wrench","mdi-check"],shop:{name:"A",address:"567 Kingston Rd.",ratings:"4.5"}}}},O=l(89);const $=(0,O.Z)(A,[["render",F]]);var P=$,j=l(4075),L=l(6233);const B=(0,k.a)({name:"VRadio",props:{...(0,L.$9)({falseIcon:"$radioOff",trueIcon:"$radioOn"})},setup(e,t){let{slots:l}=t;return(0,b.L)((()=>(0,a.Wm)(L.g5,(0,a.dG)(e,{class:"v-radio",type:"radio"}),l))),{}}});var R=l(8302),Z=l(835),G=l(7302),N=l(8717),Y=l(7514);const H=(0,k.a)({name:"VRadioGroup",inheritAttrs:!1,props:{height:{type:[Number,String],default:"auto"},...(0,R.co)(),...(0,y.CE)((0,Z.Z1)(),["multiple"]),trueIcon:{type:C.lE,default:"$radioOn"},falseIcon:{type:C.lE,default:"$radioOff"},type:{type:String,default:"radio"}},emits:{"update:modelValue":e=>!0},setup(e,t){let{attrs:l,slots:i}=t;const o=(0,Y.sq)(),s=(0,a.Fl)((()=>e.id||`radio-group-${o}`)),n=(0,N.z)(e,"modelValue");return(0,b.L)((()=>{const[t,o]=(0,y.An)(l),[r,d]=(0,R.PE)(e),[c,u]=(0,L.fU)({...e,multiple:!1}),m=i.label?i.label({label:e.label,props:{for:s.value}}):e.label;return(0,a.Wm)(R.q8,(0,a.dG)({class:"v-radio-group"},t,r,{modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,id:s.value}),{...i,default:t=>{let{id:l,isDisabled:s,isReadonly:r}=t;return(0,a.Wm)(a.HY,null,[m&&(0,a.Wm)(G.J,{for:l.value,clickable:!0},{default:()=>[m]}),(0,a.Wm)(Z.Ee,(0,a.dG)(c,{id:l.value,defaultsTarget:"VRadio",trueIcon:e.trueIcon,falseIcon:e.falseIcon,type:e.type,disabled:s.value,readonly:r.value},o,{modelValue:n.value,"onUpdate:modelValue":e=>n.value=e}),i)])}})})),{}}}),q={class:"d-flex justify-left align-center"},K=(0,a._)("br",null,null,-1),J=(0,a._)("br",null,null,-1),M=(0,a._)("br",null,null,-1),Q={class:"text-center"},X=(0,a._)("p",null,"Why are you cancelling?",-1),ee=(0,a._)("div",{class:"font-weight-bold text-subtitle-1 pb-2"},"It may be possible to cancel if the mechanical status DOES NOT REFLECT these statused yet",-1),te=(0,a._)("li",{class:"font-weight-bold text-subtitle-1 pr-2"},"On the way",-1),le=(0,a._)("p",{class:"text-subtitle-1"},"This means that the mechanical has already on the way to help you",-1),ae=(0,a._)("li",{class:"font-weight-bold text-subtitle-1 pr-2"},"In process",-1),ie=(0,a._)("p",{class:"text-subtitle-1"},"This means that the mechanical is fixing your car now",-1),oe=(0,a._)("div",{class:"font-weight-bold text-subtitle-1"},"If you still want to cancelling the order, please contact with your mechanical.",-1);function se(e,t,l,r,d,c){const v=(0,a.up)("v-card-action");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(i._,{variant:"tonal",onClick:t[0]||(t[0]=t=>e.locatorButtonPressed()),class:"text-left pa-4 d-flex justify-space-between align-center"},{default:(0,a.w5)((()=>[(0,a._)("section",q,[(0,a.Wm)(S.t,{icon:"mdi-store"}),(0,a._)("section",null,[(0,a.Wm)(p.E,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.shop.shopName),1)])),_:1}),(0,a.Wm)(o.Z,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,u.zw)(l.shop.shopAddress)+", "+(0,u.zw)(l.shop.ratings),1)])),_:1})])]),(0,a.Wm)(S.t,{icon:"mdi-phone",class:"px-8"})])),_:1}),(0,a.Wm)(n.C,{class:"mt-3"}),(0,a.Wm)(j.J,{class:"my-3"}),(0,a.Wm)(i._,{flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p.E,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Detail")])),_:1}),(0,a.Wm)(o.Z,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" ("+(0,u.zw)(l.shop.location.lat+", "+l.shop.location.lng)+") ",1),K,(0,a.Uk)(" "+(0,u.zw)(l.car.plate+" "+l.car.brand)+" ",1),J,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.problems,(e=>((0,a.wg)(),(0,a.iD)("p",{class:"d-inline",key:e},(0,u.zw)(e+" "),1)))),128)),M])),_:1}),(0,a._)("div",Q,[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m.T,{disabled:d.valid,color:"red",variant:"tonal",onClick:t[1]||(t[1]=e=>c.checkStage())},{default:(0,a.w5)((()=>[(0,a.Uk)("Cancel")])),_:1},8,["disabled"])])),_:1})])])),_:1}),(0,a.Wm)(s.B,{modelValue:d.dialog,"onUpdate:modelValue":t[4]||(t[4]=e=>d.dialog=e),width:"1000",class:"text-left pa-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(i._,{class:"text-left pa-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(p.E,{class:"text-h5"},{default:(0,a.w5)((()=>[(0,a.Uk)("Cancel order")])),_:1}),(0,a.Wm)(o.Z,null,{default:(0,a.w5)((()=>[X,(0,a.Wm)(H,null,{default:(0,a.w5)((()=>[(0,a.Wm)(B,{label:"The problem was already fixed",value:"fixed"}),(0,a.Wm)(B,{label:"Found another mechanical",value:"found"}),(0,a.Wm)(B,{label:"No need to fix anymore",value:"no need"}),(0,a.Wm)(B,{label:"Others",value:"other"})])),_:1})])),_:1}),(0,a.Wm)(h.o,{justify:"end",class:"pa-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m.T,{class:"mx-1",variant:"tonal",color:"error",onClick:t[2]||(t[2]=e=>d.dialog=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)(" Cancel ")])),_:1}),(0,a.Wm)(m.T,{class:"mx-1",color:"blue",variant:"tonal",onClick:t[3]||(t[3]=e=>c.submitForm())},{default:(0,a.w5)((()=>[(0,a.Uk)(" Submit ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(s.B,{modelValue:d.dialog2,"onUpdate:modelValue":t[6]||(t[6]=e=>d.dialog2=e),width:"1000",class:"text-left pa-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(i._,{class:"text-left pa-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(p.E,{class:"text-h5"},{default:(0,a.w5)((()=>[(0,a.Uk)("Unable to cancelling oreder")])),_:1}),(0,a.Wm)(o.Z,null,{default:(0,a.w5)((()=>[ee,(0,a.Wm)(h.o,{class:"pa-3"},{default:(0,a.w5)((()=>[te,(0,a.Uk)(),le])),_:1}),(0,a.Wm)(h.o,{class:"pa-3 pb-6"},{default:(0,a.w5)((()=>[ae,(0,a.Uk)(),ie])),_:1}),oe])),_:1}),(0,a.Wm)(h.o,{justify:"end",class:"pa-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m.T,{class:"mx-1",variant:"tonal",color:"blue",onClick:t[5]||(t[5]=e=>d.dialog2=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)(" Ok ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var ne={props:{shop:{type:Object},car:{type:Object},location:{type:Object},problems:{type:Array},currentStage:{type:Number}},data(){return{valid:!1,dialog:!1,dialog2:!1}},methods:{checkStage(){1==this.currentStage&&(this.dialog=!0),this.currentStage>=2&&(this.dialog2=!0),4==this.currentStage&&(this.valid=!0)},submitForm(){this.dialog=!1;const e=new URLSearchParams({reason:this.value});this.axios.post(this.$backendApi+"customer/create-profile",e).then((e=>{console.log(e.data)}))}}};const re=(0,O.Z)(ne,[["render",se]]);var de=re,ce={data(){return{cusID:void 0,ticketID:void 0,carID:void 0,shopID:void 0,status:void 0,createdTime:void 0,acceptedTime:void 0,socket:void 0,dialog:!0,shop:{shopID:void 0,shopName:"",shopAddress:"",shopTel:"",shopEmail:"",ratings:"",location:{lat:"20",lng:"90"}},car:{id:"1",type:"SUV",brand:"MG",plate:"ก2113"},problems:[]}},components:{ProgressBar:P,ProgressDetail:de},created(){this.ticketID=sessionStorage.getItem("ticketID"),console.log(this.ticketID),this.cusID=sessionStorage.getItem("cusID"),this.getTicket(),this.socket=new WebSocket("wss://7c2mohris1.execute-api.us-east-1.amazonaws.com/production?ticketID="+this.ticketID),console.log("Attempting Connection..."),this.socket.onopen=()=>{console.log("Successfully Connected"),this.socket.send("Hi From the Client!"),this.dialog=!1},this.socket.addEventListener("message",(e=>{console.log("Message from server ",e.data),this.getTicket()})),this.socket.onclose=e=>{console.log("Socket Closed Connection: ",e),this.socket.send("Client Closed!")},this.socket.onerror=e=>{this.console.log("Socket Error: ",e)}},methods:{getTicket(){const e=new URLSearchParams({ticketID:this.ticketID});this.axios.post(this.$backendApi+"customer/get-ticket",e,{headers:{Authorization:sessionStorage.getItem("jwt")}}).then((e=>{console.log(e.data),this.carID=e.data.carID,this.shopID=e.data.shopID,this.status=e.data.status,this.problems=e.data.problem,this.createdTime=e.data.createdTime,this.acceptedTime=e.data.acceptedTime,this.getCarDetail(),"Active"!=this.status&&this.getShopProfile()}))},getShopProfile(){const e=new URLSearchParams({shopID:this.shopID});this.axios.post(this.$backendApi+"customer/get-shop-profile",e).then((e=>{this.shop=e.data}))},getCarDetail(){const e=new URLSearchParams({carID:this.carID});this.axios.post(this.$backendApi+"customer/get-car",e,{headers:{Authorization:sessionStorage.getItem("jwt")}}).then((e=>{this.car=e.data}))}}};const ue=(0,O.Z)(ce,[["render",c]]);var me=ue}}]);
//# sourceMappingURL=114.132be852.js.map