{"version":3,"file":"js/396.9640b4e7.js","mappings":"+QACEA,EAAAA,EAAAA,IAYM,2BAXJA,EAAAA,EAAAA,IAUSC,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IAVWC,EAAAA,SAALC,K,WAAfC,EAAAA,EAAAA,IAUSC,EAAAA,EAAAA,CAVqBC,IAAKH,EAAEI,U,mBACnC,IAEe,EAFfC,EAAAA,EAAAA,IAEeC,EAAAA,EAAAA,KAAAA,C,kBADb,IAAgB,mBAAbN,EAAEI,UAAQ,M,YAEfC,EAAAA,EAAAA,IAEcE,EAAAA,EAAAA,KAAAA,C,kBADZ,IAAO,mBAAJP,GAAC,M,YAENK,EAAAA,EAAAA,IAEiBG,EAAAA,EAAAA,KAAAA,C,kBADf,IAAmD,EAAnDH,EAAAA,EAAAA,IAAmDI,EAAAA,EAAAA,CAA5CC,KAAA,GAAMC,QAAK,GAAEC,EAAAA,aAAaZ,I,mBAAI,IAAM,UAAN,a,0EAO7C,GACEa,OACE,MAAO,CACLC,QAAS,GAEb,EACAC,UACEC,KAAKC,kBACLD,KAAKE,OAAS,IAAIC,UAAUH,KAAKI,OAAS,yBAC1CC,QAAQC,IAAI,4BAEZN,KAAKE,OAAOK,OAAS,KACnBF,QAAQC,IAAI,0BACZN,KAAKE,OAAOM,KAAK,WAAW,EAG9BR,KAAKE,OAAOO,iBAAiB,WAAYC,IACvCL,QAAQC,IAAI,uBAAwBI,EAAMb,MAC1CG,KAAKC,iBAAiB,IAGxBD,KAAKE,OAAOS,QAAWD,IACrBL,QAAQC,IAAI,6BAA8BI,GAC1CV,KAAKE,OAAOM,KAAK,iBAAiB,EAGpCR,KAAKE,OAAOU,QAAWC,IACrBb,KAAKK,QAAQC,IAAI,iBAAkBO,EAAM,CAE7C,EACAC,QAAS,CACPb,kBACED,KAAKe,MACFC,KAAKhB,KAAKiB,YAAc,wBACxBC,MAAMC,IACLd,QAAQC,IAAIa,EAAStB,MACrBG,KAAKF,QAAUqB,EAAStB,IAAI,GAElC,EAEAuB,aAAaC,GACXC,eAAeC,QAAQ,WAAYF,EAAOjC,UAE1C,MAAMS,EAAO,IAAI2B,gBAAgB,CAC/BpC,SAAUiC,EAAOjC,SACjBqC,MAAOJ,EAAOK,IAAID,MAClBE,MAAON,EAAOO,IAAID,MAClBE,QAASR,EAAOQ,QAChBC,OAAQR,eAAeS,QAAQ,UAC/BC,IAAKX,EAAOY,SAASD,IACrBE,IAAKb,EAAOY,SAASC,IACrBC,YAAad,EAAOc,cAEtBnC,KAAKe,MACFC,KAAKhB,KAAKiB,YAAc,qBAAsBpB,GAC9CqB,MAAMC,IACLd,QAAQC,IAAIa,EAAStB,MACrBG,KAAKoC,QAAQC,KAAK,YAAY,GAEpC,I,QCvEJ,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://frontend/./src/views/ExampleView.vue","webpack://frontend/./src/views/ExampleView.vue?91f9"],"sourcesContent":["<template>\r\n  <div>\r\n    <v-card v-for=\"t in tickets\" :key=\"t.ticketID\">\r\n      <v-card-title>\r\n        {{ t.ticketID }}\r\n      </v-card-title>\r\n      <v-card-text>\r\n        {{ t }}\r\n      </v-card-text>\r\n      <v-card-actions>\r\n        <v-btn flat @click=\"acceptTicket(t)\">accept</v-btn>\r\n      </v-card-actions>\r\n    </v-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      tickets: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getActiveTicket();\r\n    this.socket = new WebSocket(this.$wsApi + \"shop/ws/active-ticket\");\r\n    console.log(\"Attempting Connection...\");\r\n\r\n    this.socket.onopen = () => {\r\n      console.log(\"Successfully Connected\");\r\n      this.socket.send(\"Accepted\");\r\n    };\r\n\r\n    this.socket.addEventListener(\"message\", (event) => {\r\n      console.log(\"Message from server \", event.data);\r\n      this.getActiveTicket();\r\n    });\r\n\r\n    this.socket.onclose = (event) => {\r\n      console.log(\"Socket Closed Connection: \", event);\r\n      this.socket.send(\"Client Closed!\");\r\n    };\r\n\r\n    this.socket.onerror = (error) => {\r\n      this.console.log(\"Socket Error: \", error);\r\n    };\r\n  },\r\n  methods: {\r\n    getActiveTicket() {\r\n      this.axios\r\n        .post(this.$backendApi + \"shop/get-ticket-list\")\r\n        .then((response) => {\r\n          console.log(response.data);\r\n          this.tickets = response.data;\r\n        });\r\n    },\r\n\r\n    acceptTicket(ticket) {\r\n      sessionStorage.setItem(\"ticketID\", ticket.ticketID);\r\n\r\n      const data = new URLSearchParams({\r\n        ticketID: ticket.ticketID,\r\n        cusID: ticket.cus.cusID,\r\n        carID: ticket.car.carID,\r\n        problem: ticket.problem,\r\n        shopID: sessionStorage.getItem(\"shopID\"),\r\n        lat: ticket.location.lat,\r\n        lng: ticket.location.lng,\r\n        description: ticket.description,\r\n      });\r\n      this.axios\r\n        .post(this.$backendApi + \"shop/accept-ticket\", data)\r\n        .then((response) => {\r\n          console.log(response.data);\r\n          this.$router.push(\"/example2\")\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./ExampleView.vue?vue&type=template&id=949c2d36\"\nimport script from \"./ExampleView.vue?vue&type=script&lang=js\"\nexport * from \"./ExampleView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\acp49\\\\Desktop\\\\workSpace\\\\Mech-Mobile-M-2-\\\\frontend mech\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementBlock","_Fragment","$data","t","_createBlock","_component_v_card","key","ticketID","_createVNode","_component_v_card_title","_component_v_card_text","_component_v_card_actions","_component_v_btn","flat","onClick","$options","data","tickets","mounted","this","getActiveTicket","socket","WebSocket","$wsApi","console","log","onopen","send","addEventListener","event","onclose","onerror","error","methods","axios","post","$backendApi","then","response","acceptTicket","ticket","sessionStorage","setItem","URLSearchParams","cusID","cus","carID","car","problem","shopID","getItem","lat","location","lng","description","$router","push","__exports__","render"],"sourceRoot":""}