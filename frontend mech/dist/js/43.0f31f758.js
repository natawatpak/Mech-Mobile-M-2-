"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[43],{1043:function(t,e,s){s.r(e),s.d(e,{default:function(){return l}});var o=s(3396),i=s(7139),c=s(870),n=s(4075);function a(t,e,s,a,k,r){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Uk)((0,i.zw)(k.ticket)+" ",1),(0,o.Wm)(n.J),(0,o.Wm)(c.T,{onClick:e[0]||(e[0]=t=>r.updateTicketStatus("On the way"))},{default:(0,o.w5)((()=>[(0,o.Uk)("On the way")])),_:1}),(0,o.Wm)(c.T,{onClick:e[1]||(e[1]=t=>r.updateTicketStatus("Processing"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Processing")])),_:1}),(0,o.Wm)(c.T,{onClick:e[2]||(e[2]=t=>r.updateTicketStatus("Finish:Garage"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Finish:Garage")])),_:1}),(0,o.Wm)(c.T,{onClick:e[3]||(e[3]=t=>r.updateTicketStatus("Finish:Completed"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Finish:Completed")])),_:1})])}var k={data(){return{ticket:null}},mounted(){this.getTicket(sessionStorage.getItem("ticketID")),this.socket=new WebSocket(this.$wsApi+"shop/ws/"+sessionStorage.getItem("ticketID")),console.log("Attempting Connection..."),this.socket.onopen=()=>{console.log("Successfully Connected"),this.socket.send("Accepted")},this.socket.addEventListener("message",(t=>{console.log("Message from server ",t.data)})),this.socket.onclose=t=>{console.log("Socket Closed Connection: ",t),this.socket.send("Client Closed!")},this.socket.onerror=t=>{this.console.log("Socket Error: ",t)}},methods:{getTicket(t){const e=new URLSearchParams({ticketID:t});this.axios.post(this.$backendApi+"shop/get-ticket",e).then((t=>{console.log(t.data),this.ticket=t.data}))},updateTicketStatus(t){this.socket.send(t);const e=new URLSearchParams({ticketID:this.ticket.ticketID,cusID:this.ticket.cus.cusID,carID:this.ticket.car.carID,problem:this.ticket.problem,shopID:sessionStorage.getItem("shopID"),status:t});this.axios.post(this.$backendApi+"shop/update-ticket",e).then((t=>{console.log(t.data),this.ticket.status=t.data.status}))}}},r=s(89);const h=(0,r.Z)(k,[["render",a]]);var l=h}}]);
//# sourceMappingURL=43.0f31f758.js.map